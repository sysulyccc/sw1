# Index Enhancement Strategy Configuration
# =========================================

[data]
# Data source settings
processed_data_path = "/root/sw1/processed_data"
fut_code = "IC"  # Options: IC (CSI500), IM (CSI1000), IF (CSI300)

[account]
# Account settings
initial_capital = 10_000_000.0
default_margin_rate = 0.12  # 12% fallback if no historical data
commission_rate = 0.00023   # 0.023% per trade
use_dynamic_margin = true   # Use historical margin rates from data

[strategy]
# Strategy selection
strategy_type = "baseline"  # Options: "baseline", "basis_timing"
strategy_name = "Baseline Roll Strategy"

# strategy_type = "basis_timing"
# strategy_name = "Basis Timing Strategy"

# Roll parameters
roll_days_before_expiry = 2
contract_selection = "nearby"  # Options: "nearby", "volume", "oi"
min_roll_days = 5
target_leverage = 1.0

# Basis timing parameters (only used when # strategy_type = "basis_timing")
basis_entry_threshold = -0.02   # Enter when basis < -2%
basis_exit_threshold = 0.005    # Exit when basis > +0.5%
lookback_window = 60
use_percentile = false
entry_percentile = 0.2
exit_percentile = 0.8
position_scale_by_basis = false

[backtest]
# Backtest period (empty string or omit for full range)
start_date = "2015-05-01"
end_date = ""  # Empty for latest available
benchmark_name = "CSI 500 Index"
risk_free_rate = 0.02  # Annual risk-free rate
trading_days_per_year = 242  # China market

# Price field settings (avoid lookahead bias)
# signal_price_field: Price used for signal calculation (open, pre_settle, close)
# execution_price_field: Price used for trade execution (open, close)
signal_price_field = "open"      # Use open price for signal (known at execution time)
execution_price_field = "open"   # Execute at open price (T+0 open execution)

[output]
# Output settings
output_path = "./output"
save_plots = true
save_trade_log = true
save_nav_series = true
plot_dpi = 300
figure_format = "png"
