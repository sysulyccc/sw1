# Index Enhancement Strategy Configuration
# =========================================

[data]
# Data source settings
processed_data_path = "/root/sw1/processed_data"
fut_code = "IC"  # Options: IC (CSI500), IM (CSI1000), IF (CSI300)

[account]
# Account settings
initial_capital = 10_000_000.0
default_margin_rate = 0.12  # 12% fallback if no historical data
commission_rate = 0.00023   # 0.023% per trade
use_dynamic_margin = true   # Use historical margin rates from data

[strategy]
# Strategy selection
strategy_type = "baseline"  # Options: "baseline" or "basis_timing" or "spread_timing" or "liquidity_roll" or "aery_roll"
strategy_name = "Baseline Roll Strategy"

# Roll parameters
roll_days_before_expiry = 2  # Safety net for smart roll (trading days, not calendar days)
contract_selection = "nearby"  # Options: "nearby", "volume", "oi"
min_roll_days = 5
target_leverage = 1.0
roll_criteria = "volume"  # volume, oi (for smart_roll strategy)
liquidity_threshold = 0.05  # 5% threshold to avoid ping-pong rolling
position_mode = "notional"      # "notional" or "fixed_lot"
fixed_lot_size = 1              # Used when position_mode = "fixed_lot"

# Basis timing parameters
roll_window_start = 15            # Start of timing window (days)
hard_roll_days = 1                # Forced roll threshold
history_window = 60               # Basis lookback window
basis_threshold_percentile = 70   # Roll if basis >= this percentile
    
# Spread timing parameters
roll_window_start = 15            # Start of timing window (days)
hard_roll_days = 2                # Forced roll threshold
history_window = 90               # Spread lookback window
spread_threshold_percentile = 30  # Roll if spread <= this percentile
    
# liquidity_roll parameters
roll_days_before_expiry = 1   # Safety net
roll_criteria = "volume"      # Options: "volume", "oi"
    
# aery_roll parameters
roll_days_before_expiry = 2        # Fixed roll trigger
min_roll_days = 5


[backtest]
# Backtest period (empty string or omit for full range)
start_date = "2015-05-01"
end_date = ""  # Empty for latest available
benchmark_name = "CSI 500 Index"
risk_free_rate = 0.02  # Annual risk-free rate
trading_days_per_year = 242  # China market

# Price field settings (avoid lookahead bias)
# signal_price_field: Price used for signal calculation (open, pre_settle, close)
# execution_price_field: Price used for trade execution (open, close)
signal_price_field = "open"      # Use open price for signal (known at execution time)
execution_price_field = "open"   # Execute at open price (T+0 open execution)

[output]
# Output settings
output_path = "./output"
save_plots = true
save_trade_log = true
save_nav_series = true
plot_dpi = 300
figure_format = "png"
